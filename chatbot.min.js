function initChatbot() {
    if (!window.lovinbotChatbotConfig) {
        console.error('Lovinbot config not found');
        return;
    }

    window.addEventListener("message", (event) => {
        if (!event.origin.includes(baseUrl)) return;
        if (event.data.action === "resizeIframe") {
            const iframe = document.getElementById("lovinbot-chatbot-iframe");
            if (iframe) {
                iframe.style.width = `${event.data.width}px`;
                iframe.style.height = `${event.data.height}px`;
                iframe.style.display = `${event.data.display}`;
            }
        }
    });

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', embedChatbot);
    } else {
        embedChatbot();
    }
}

initChatbot();
